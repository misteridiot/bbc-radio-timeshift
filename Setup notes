SET UP NEW
==========

SET UP PI OS
Download latest image of Raspbian - https://www.raspberrypi.org/downloads/raspbian/
Use Etcher to burn to SD card
Edit /etc/wpa_supplicant/wpa_supplicant.conf to include network details:\
        network={
               ssid="YourNetworkSSID"
               psk="Your Network's Passphrase"
               key_mgmt=WPA-PSK
        }

Open /etc/ssh/ssh_config & /etc/ssh/sshd_config
Add the following line to the bottom of the configuration file to prevent ssh hanging: IPQoS 0x00
On /boot partition, touch ssh
Insert SD card into Pi and boot up
On dev machine ping raspberrypi.local to check it's on the network
Then ssh pi@raspberrypi.local, default p: raspberry
Change password using passwd

INSTALL SOFTWARE
Install git & omxplayer: sudo apt-get install git omxplayer
Create clone of git repo: git clone https://github.com/misteridiot/bbc-radio-timeshift.git
In /bbc-radio-timeshift install dependencies:
 sudo apt-get install libxml2-dev libxslt-dev python-dev zlib1g-dev python-pip [this is because lxml, a dependency of extruct, needs the development packages of libxml2 and libxslt to be installed]
 sudo apt-get install python-lxml python3-lxml [this is due to the regular pip install of extruct --> lxml hanging. In practice this might just be taking ages to compile, but this method works and is fast]
 pip install -r requirements.txt
Create audio, json & logs folders: mkdir audio, mkdir json, mkdir logs
Install get_iplayer: wget http://packages.hedgerows.org.uk/raspbian/install.sh -O - | sh
Change timezone to current location: raspi-config

SET UP CRON
Change permissions on scripts to make executable: chmod 755 player.py main.py cron_test.py
Open root crontab: sudo crontab -e
Add in library locations into PYTHONPATH=/dir:/dir:[etc]

        PATH=/usr/sbin:/usr/bin:/sbin:/bin
        PYTHONPATH=usr/lib/python2.7:usr/lib/python2.7/plat-arm-linux-gnueabihf:usr/lib/python2.7/lib-tk:/home/pi/.local/lib/python2.7/site-packages

        @reboot cd /home/pi/bbc-radio-timeshift && /home/pi/bbc-radio-timeshift/player.py 2>&1 | /home/pi/bbc-radio-timeshift/logs/timestamp.sh >> /home/pi/bbc-radio-timeshift/logs/player.log
        * * * * * /usr/bin/python /home/pi/bbc-radio-timeshift/cron_test.py 2>&1 | /home/pi/bbc-radio-timeshift/logs/timestamp.sh >> /home/pi/bbc-radio-timeshift/logs/cron.log
        0 * * * * cd /home/pi/bbc-radio-timeshift && /home/pi/bbc-radio-timeshift/main.py  2>&1 | /home/pi/bbc-radio-timeshift/logs/timestamp.sh >> /home/pi/bbc-radio-timeshift/logs/cron.log

Ctrl-X to exit and save
